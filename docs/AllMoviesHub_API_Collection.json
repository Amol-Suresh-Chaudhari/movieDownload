{
  "info": {
    "name": "AllMoviesHub API Collection",
    "description": "Complete API documentation for AllMoviesHub - Movie streaming and download platform",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{admin_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "admin_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Admin Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Authenticate admin user and get JWT token"
          },
          "response": [
            {
              "name": "Successful Login",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"admin123\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/auth/login",
                  "host": ["{{base_url}}"],
                  "path": ["api", "auth", "login"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"user\": {\n    \"id\": \"64f8b2c8e1234567890abcde\",\n    \"username\": \"admin\",\n    \"role\": \"admin\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Verify Token",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/auth/verify",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "verify"]
            },
            "description": "Verify JWT token validity"
          }
        }
      ]
    },
    {
      "name": "Movies",
      "item": [
        {
          "name": "Get All Movies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/movies?page=1&limit=12",
              "host": ["{{base_url}}"],
              "path": ["api", "movies"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number for pagination"
                },
                {
                  "key": "limit",
                  "value": "12",
                  "description": "Number of movies per page"
                },
                {
                  "key": "category",
                  "value": "bollywood",
                  "description": "Filter by category (bollywood, hollywood, south, web-series)",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "spider",
                  "description": "Search movies by title, description, cast, director",
                  "disabled": true
                },
                {
                  "key": "year",
                  "value": "2023",
                  "description": "Filter by release year",
                  "disabled": true
                },
                {
                  "key": "genre",
                  "value": "action",
                  "description": "Filter by genre",
                  "disabled": true
                },
                {
                  "key": "quality",
                  "value": "1080p",
                  "description": "Filter by quality",
                  "disabled": true
                },
                {
                  "key": "isDualAudio",
                  "value": "true",
                  "description": "Filter dual audio movies",
                  "disabled": true
                }
              ]
            },
            "description": "Get paginated list of movies with optional filters"
          }
        },
        {
          "name": "Create Movie (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Sample Movie\",\n  \"slug\": \"sample-movie\",\n  \"description\": \"A great movie description\",\n  \"poster\": \"https://example.com/poster.jpg\",\n  \"year\": 2023,\n  \"category\": \"Hollywood\",\n  \"genre\": [\"Action\", \"Adventure\"],\n  \"rating\": 8.5,\n  \"runtime\": \"2h 30m\",\n  \"language\": \"English\",\n  \"isDualAudio\": true,\n  \"cast\": \"Actor 1, Actor 2, Actor 3\",\n  \"director\": \"Director Name\",\n  \"downloadLinks\": [\n    {\n      \"quality\": \"480p\",\n      \"size\": \"400MB\",\n      \"url\": \"https://example.com/download/480p\"\n    },\n    {\n      \"quality\": \"720p\",\n      \"size\": \"1.2GB\",\n      \"url\": \"https://example.com/download/720p\"\n    },\n    {\n      \"quality\": \"1080p\",\n      \"size\": \"2.5GB\",\n      \"url\": \"https://example.com/download/1080p\"\n    }\n  ],\n  \"streamingLinks\": [\n    {\n      \"platform\": \"Server 1\",\n      \"url\": \"https://example.com/stream/server1\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/movies",
              "host": ["{{base_url}}"],
              "path": ["api", "movies"]
            },
            "description": "Create a new movie (Admin only)"
          }
        },
        {
          "name": "Get Movie by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/movies/64f8b2c8e1234567890abcde",
              "host": ["{{base_url}}"],
              "path": ["api", "movies", "64f8b2c8e1234567890abcde"]
            },
            "description": "Get specific movie details by ID"
          }
        },
        {
          "name": "Update Movie (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Movie Title\",\n  \"rating\": 9.0,\n  \"description\": \"Updated description\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/movies/64f8b2c8e1234567890abcde",
              "host": ["{{base_url}}"],
              "path": ["api", "movies", "64f8b2c8e1234567890abcde"]
            },
            "description": "Update existing movie (Admin only)"
          }
        },
        {
          "name": "Delete Movie (Admin)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/movies/64f8b2c8e1234567890abcde",
              "host": ["{{base_url}}"],
              "path": ["api", "movies", "64f8b2c8e1234567890abcde"]
            },
            "description": "Delete movie (Admin only)"
          }
        },
        {
          "name": "Approve Movie (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/movies/64f8b2c8e1234567890abcde/approve",
              "host": ["{{base_url}}"],
              "path": ["api", "movies", "64f8b2c8e1234567890abcde", "approve"]
            },
            "description": "Approve movie for publication (Admin only)"
          }
        }
      ]
    },
    {
      "name": "Admin",
      "item": [
        {
          "name": "Get Admin Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/stats",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "stats"]
            },
            "description": "Get admin dashboard statistics"
          },
          "response": [
            {
              "name": "Admin Stats Response",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/stats",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "stats"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"totalMovies\": 150,\n  \"totalUsers\": 1250,\n  \"totalViews\": 45000,\n  \"totalDownloads\": 12000,\n  \"recentMovies\": [\n    {\n      \"_id\": \"64f8b2c8e1234567890abcde\",\n      \"title\": \"Latest Movie\",\n      \"category\": \"Hollywood\",\n      \"createdAt\": \"2023-09-06T10:30:00.000Z\"\n    }\n  ]\n}"
            }
          ]
        },
        {
          "name": "Generate Movie with AI",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"Create a sci-fi action movie about space exploration\",\n  \"category\": \"Hollywood\",\n  \"year\": 2023\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/movies/generate",
              "host": ["{{base_url}}"],
              "path": ["api", "movies", "generate"]
            },
            "description": "Generate movie details using AI (Admin only)"
          }
        }
      ]
    },
    {
      "name": "Episodes (Web Series)",
      "item": [
        {
          "name": "Get Episodes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/movies/64f8b2c8e1234567890abcde/episodes",
              "host": ["{{base_url}}"],
              "path": ["api", "movies", "64f8b2c8e1234567890abcde", "episodes"]
            },
            "description": "Get episodes for a web series"
          }
        },
        {
          "name": "Add Episode (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"episodeNumber\": 1,\n  \"title\": \"Episode 1: Pilot\",\n  \"description\": \"The first episode of the series\",\n  \"duration\": \"45 minutes\",\n  \"downloadLinks\": [\n    {\n      \"quality\": \"720p\",\n      \"size\": \"800MB\",\n      \"url\": \"https://example.com/episode1/720p\"\n    }\n  ],\n  \"streamingLinks\": [\n    {\n      \"platform\": \"Server 1\",\n      \"url\": \"https://example.com/stream/episode1\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/movies/64f8b2c8e1234567890abcde/episodes",
              "host": ["{{base_url}}"],
              "path": ["api", "movies", "64f8b2c8e1234567890abcde", "episodes"]
            },
            "description": "Add episode to web series (Admin only)"
          }
        }
      ]
    },
    {
      "name": "Utility",
      "item": [
        {
          "name": "Get Sitemap",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sitemap.xml",
              "host": ["{{base_url}}"],
              "path": ["sitemap.xml"]
            },
            "description": "Get XML sitemap for SEO"
          }
        },
        {
          "name": "Get Robots.txt",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/robots.txt",
              "host": ["{{base_url}}"],
              "path": ["robots.txt"]
            },
            "description": "Get robots.txt file"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-set admin token from login response",
          "if (pm.response && pm.response.json() && pm.response.json().token) {",
          "    pm.globals.set('admin_token', pm.response.json().token);",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Basic response validation",
          "pm.test('Status code is successful', function () {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 204]);",
          "});",
          "",
          "pm.test('Response time is less than 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "// Set admin token from login response",
          "if (pm.response.json() && pm.response.json().token) {",
          "    pm.globals.set('admin_token', pm.response.json().token);",
          "    console.log('Admin token updated');",
          "}"
        ]
      }
    }
  ]
}
